<!DOCTYPE html>
<html lang="en">

<!-- Metadata -->
<head>
  <meta charset="utf-8">
  
  <!-- Title -->
  <title>Graduate Group 3: NLP (n-gram distributions), COSI 116A F23</title>
  
  <!-- CSS Styling -->
  <link rel="stylesheet" href="style.css">
  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png">
  <link rel="manifest" href="favicons/site.webmanifest">
  <link rel="shortcut icon" href="favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="favicons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
</head>

<!-- Main page content -->
<body>
  <div class = "content-column">
  
    <h1>Graduate Group 3: NLP (n-gram distributions), COSI 116A F23</h1>
    
    <p><strong>Annika Sparrell</strong>, <strong>Kasey La</strong>, <strong>Ge Gao</strong></p>
    
    <p>Project-long Course Project as part of COSI 116A: Information Visualization, taught by <a href="https://cs.brandeis.edu/~dylan/">Prof. Dylan Cashman</a>, <a href="https://cs.brandeis.edu/">Brandeis University.</a>
      Repository of code can be found <a href="https://github.com/asparrell/cosi132FinalProject/">here</a> on Github.</p>

    
    <h1>Motivation</h1>
    
    <p>Our team set out to create a set of visualizations to fulfill the requirements of this course, in an area that is of mutual interest to us.
      As our group is composed of students in the CL Master's program as well as CS Master’s students, we decided that to pursue a topic in the NLP field.
      After some brainstorming in which we considered ideas such as visualizing word embeddings or classification clustering algorithms, we decided that it would be best to use the simpler concept of n-gram generation.
    </p>
    <p>
      Put simply, n-grams are sequences of a text of a certain length that have a certain probability of occurrence in the text.
      For example, the sentence “The quick brown fox jumped over the lazy dog” could be broken up into unigrams “the”, “quick”, “brown”..., bigrams “the quick”, “quick brown”, “brown fox”..., trigrams “the quick brown”, “quick brown fox”..., and so on. These n-grams can then be recombined through a probabilistic sampling to generate a new text.
      In terms of visualizations, we thought that this project would lend itself to split views on the original text as well as the distributions of these n-grams across the text.
      Specifically, through this visualization, we hope to allow users to explore how the distribution of n-grams varies between texts, both how they differ and what universals are present across the English language.
    </p>
    <p>
      Ultimately, we decided to pursue a visualization which would examine the distributions of unigrams across different texts to compare their distributions.
    </p>

    
    <h1>Visualization</h1>
    
  </div>
  <div class="vis-holder-holder">

  <!-- dropdown holder -->
  <div class="dropdown-holder">
    <select id="d3-dropdown" onchange="loadChart(value)">
        <option value=5>Top 5</option>
        <option value=20>Top 20</option>
    </select>
  </div>

  <!-- visualization holder -->
  <div class="vis-holder">
    <div id="alice-holder">
      <div id="alice-title">Alice in Wonderland</div>
      <div id="barchart_alice" onclick="selectedBorder('barchart_alice')"></div>
    </div>
    <div id="austen-holder">
      <div id="austen-title">Pride and Prejudice</div>
      <div id="barchart_austen" onclick="selectedBorder('barchart_austen')"></div>
    </div>
    <div id="gatsby-holder">
      <div id="gatsby-title">The Great Gatsby</div>
      <div id="barchart_gatsby" onclick="selectedBorder('barchart_gatsby')"></div>
    </div>
  </div>

  </div>

  <!-- textbox holder -->
  <div class="text-holder" id="textbox"></div>

  <div class = "content-column">

    <h1>Demo Videos</h1>

    <video controls width="100%">
      <source src="./files/demo.mp4" type="video/mp4">
      <p>Your browser doesn't support HTML5 video.</p>
    </video>
    <p><i>Demo by Annika</i></p>

    <video controls width="100%">
      <source src="./files/demo2.mp4" type="video/mp4">
      <p>Your browser doesn't support HTML5 video.</p>
    </video>
    <p><i>Demo by Ge</i></p>

    <video controls width="100%">
      <source src="./files/demo3.mp4" type="video/mp4">
      <p>Your browser doesn't support HTML5 video.</p>
    </video>
    <p><i>Demo by Kasey</i></p>

    <p>We provide views on the most common unigrams at different sizes of window (top 5, top 20, and up to 20 user-selected words).
      These are displayed for each of the texts we drew data from, sorted for the selected text. As the user selects different texts, the ordering of all unigrams adjusts accordingly.
      The user can hover over individual bars displayed in order to obtain more detailed information about the probabilities and raw counts shown.
      The graphs are linked to a snippet of text from the documents, where the words displayed in the bar chart are highlighted in the text, allowing the user to understand more intuitively where the numbers are coming from.
      The user can also select a passage of text directly to see the distributions of those words across all three texts.</p>
    <p>We used areas and text as the marks in our visualization, as our data originates in text format and area is an effective way of encoding proportion
      Color was our main channel, identifying data as belonging to a given text. Size was also used within the bar charts to indicate proportion within a given chart.
      Our main interactions were hovering over a bar to gain insight into the numerical details, as well as brushing over words in the text to see the distributions of those words in the charts.
      Charts also dynamically reordered to show the top 5 or 20 unigrams based on the selected text.
    </p>

    <div class="thumbnail_holder">
      <div class="thumbnail">
        <img src="./images/final1.png" alt="<i>Default view (top 5)</i>" onclick="enlarge2(this)">
      </div>
      <div class="thumbnail">
        <img src="./images/final2.png" alt="<i>Default view (top 20)</i>" onclick="enlarge2(this)">
      </div>
      <div class="thumbnail">
        <img src="./images/final3.png" alt="<i>Top 5 ranked by <u>Alice</u></i>" onclick="enlarge2(this)">
      </div>
      <div class="thumbnail">
        <img src="./images/final4.png" alt="<i>Top 5 ranked by <u>P & P</u></i>" onclick="enlarge2(this)">
      </div>
      <div class="thumbnail">
        <img src="./images/final5.png" alt="<i>Top 5 ranked by <u>Gatsby</u></i>" onclick="enlarge2(this)">
      </div>
      <div class="thumbnail">
        <img src="./images/final6.png" alt="<i>Hovering for more details</i>" onclick="enlarge2(this)">
      </div>
      <div class="thumbnail">
        <img src="./images/final7.png" alt="<i>Selecting text from <u>Alice</u></i>" onclick="enlarge2(this)">
      </div>
      <div class="thumbnail">
        <img src="./images/final8.png" alt="<i>Selecting text from <u>Gatsby</u></i>" onclick="enlarge2(this)">
      </div>
    </div>
    <div id="shadowbox2">
      <img id="pictureframe2">
	</div>
    <p id="caption"><i>Screenshots of visualization (Click to enlarge each one)</i></p>

    <p>More information regarding our project can be found in the demo video above or through the slides <a href="https://docs.google.com/presentation/d/1WMxEbNFStWYu2vsA5sFvjSUveUwMLgxATgNCjbuRv8M/edit?usp=sharing">here</a>.</p>

    <h1>Data Analysis</h1>
    <p>We sourced data from three public domain texts available via <a href="https://www.gutenberg.org/">Project Gutenberg</a>: <i>Alice's Adventures in Wonderland</i>, by Lewis Caroll, <i>Pride and Prejudice</i>, by Jane Austen, and <i>The Great Gatsby</i>, by F. Scott Fitzgerald.
    We chose these texts as examples of different styles within the same literary domain, long-form fiction, in hopes that this would provide the most interesting comparison of n-gram distributions with enough similarity that they could be fairly compared but enough distinction to show interesting trends.
    </p>
    <p>Annika preprocessed the data to convert it to a form which would be usable by the D3 visualizations. First, the texts were superficially cleaned so that the text only consisted of the body story of each text. These passages were then fed to the <a href="https://spacy.io/api/tokenizer">SpaCy tokenizer</a> in order to split them into sentences and then tokens.
    These were then iterated over in order to produce counts and normalized probability metrics for unigrams, bigrams, and trigrams, though our project ultimately only made use of the unigrams.
    Finally, the data was fed into a Pandas dataframe and exported as a CSV. The python files for this preprocessing can be found within the repository, under the DataHandling directory.</p>

    <h1>Task Analysis</h1>

    <p>Through our task analysis, we identified five domain tasks which could be possible avenues of visualization within the domain of n-gram distributions. Ranked from most to least important, with the query, mid-level, and high-level tasks given below each line, these were:</p>

    <ol>
      <li>Understand n-grams through visualization<br>&emsp;<i>Identify, Explore, Discover, Enjoy</i></li>
      <li>Determine how different original texts produce different generations<br>&emsp;<i>Compare, Explore, Discover</i></li>
      <li>Compare frequency of different generation paths<br>&emsp;<i>Identify, Locate, Discover, Enjoy</i></li>
      <li>Identify the words which only occur once in a corpus<br>&emsp;<i>Summarize, Explore, Discover</i></li>
      <li>Find a possible progression of n-grams given a generation<br>&emsp;<i>Compare, Explore, Discover</i></li>
    </ol>

    <p>We determined that a user's main method of interacting with our visualization would be through exploration, or navigating through the data without a clear destination in mind, with the high-level goal of discovery.
    Ultimately, we did not end up pursuing many of the tasks we ranked as lower importance due to time constraints, but given significantly more time to dedicate to such a project, we could implement some of the other sketches
    we ideated in order to pursue these other tasks.</p>

    <h1>Design Process</h1>
    
    <img src="/images/sketch1.png" alt="initial sketch">
    <p><i>First paper sketch of idea</i></p>
    <p>We chose to explore a visualization of the unigram distributions of the texts from our paper sketches.
      This idea translated well to the media of Tableau and D3, which made it a viable choice for the final project.
      It addressed the #1 ranked goal of our domain task table, which is to help users understand n-grams through visualization.
    </p>
    <div class="thumbnail_holder">
      <div class="thumbnail">
        <img src="./images/interactive_sketch_1.png" alt="interactive sketch 1" onclick="enlarge(this)">
      </div>
      <div class="thumbnail">
        <img src="./images/interactive_sketch_2.png" alt="interactive sketch 2" onclick="enlarge(this)">
      </div>
      <div class="thumbnail">
        <img src="./images/interactive_sketch_3.png" alt="interactive sketch 3" onclick="enlarge(this)">
      </div>
      <div class="thumbnail">
        <img src="./images/interactive_sketch_4.png" alt="interactive sketch 4" onclick="enlarge(this)">
      </div>
      <div class="thumbnail">
        <img src="./images/interactive_sketch_5.png" alt="interactive sketch 5" onclick="enlarge(this)">
      </div>
      <div class="thumbnail">
        <img src="./images/interactive_sketch_6.png" alt="interactive sketch 6" onclick="enlarge(this)">
      </div>
      <div class="thumbnail">
        <img src="./images/interactive_sketch_7.png" alt="interactive sketch 7" onclick="enlarge(this)">
      </div>
      <div class="thumbnail">
        <img src="./images/interactive_sketch_8.png" alt="interactive sketch 8" onclick="enlarge(this)">
      </div>
    </div>
    <div id="shadowbox">
      <img id="pictureframe">
	</div>
    <p><i>Interactive sketch snapshots (Click to enlarge each one)</i></p>
    <p>
      For our interactive sketch, we combined screenshots from Tableau with tools in Google Slides to create a mockup of our final idea.
      We decided to display three side-by-side bar charts showing the distributions of the top 5 or 20 unigrams from each text, as well
      as a textbox which would show the first paragraph of the selected story. Our interactions would involve brushing and linking between the
      text and the bars, in which the user would be able to see the distributions of the selected words in each text, as well as a hover
      for details on demand for each bar.
    </p>


    <h1>Conclusion</h1>

    <p>While this project is considerably less ambitious than our original ideas per the paper sketches, and does not include every aspect
    of the interactive sketch we assembled, our development was hampered by our group consisting of three JavaScript novices.
    We focused on having a minimal but effective visualization rather than adding in many bells and whistles.</p>
    <p>Although this visualization is very entertaining and has the potential to be used as a teaching tool, it does not get at any deep
    insights in the field of natural language processing, which was a hope of ours when we started the project.
      We believe if we had time to incorporate other visualizations in this domain, however, it could prove more insightful.</p>
    <p>Improvements that we would like to make in the future would include completing more items from our list of "nice-to-have" features, such as the ability to select an individual bar of the chart to display that word alone in the text,
       or to include a tutorial for the first time a user loads the page which introduces them to the possible interactions.
      Given substantial time to make improvements to the project, we would attempt to possibly
    implement other visualizations from our initial sketches in order to explore different aspects of n-grams, including bringing it back
    to our original idea about investigating aspects of generated text from n-gram distributions.</p>

    
    <h1>Acknowledgments</h1>

    <ul>
      <li><a href="https://d3js.org/">D3: Data-Driven Documents</a> by Mike Bostock.</li>
      <li><a href="https://www.gutenberg.org/">Project Gutenberg</a></li>
      <li><a href="https://spacy.io/api/tokenizer">SpaCy tokenizer</a></li>
      <li><a href="https://stackoverflow.com/a/8506631">Text selection from Stack Overflow</a></li>
    </ul>
    
  </div>
  
  <!-- Scripts at the end avoid need for dealing with async, defer, or onload event handlers -->
  <script src="lib/d3.v4/d3.v4.js"></script>
  <script src="js/passages.js"></script>
  <script src="js/barchart_alice.js"></script>
  <script src="js/barchart_austen.js"></script>
  <script src="js/barchart_gatsby.js"></script>
  <script src="js/visualization.js"></script>

  <script>
    // change selected barchart which determines which one has the highlighted border
    function selectedBorder(barchart) {
      document.getElementById("barchart_alice").classList.remove("selected");
      document.getElementById("barchart_austen").classList.remove("selected");
      document.getElementById("barchart_gatsby").classList.remove("selected");
      document.getElementById(barchart).classList.add("selected");
    }

    // reload charts
    function loadChart(newTop) {
      vis(newTop);
    }

    function enlarge(clicked) {
      let pic = document.getElementById("pictureframe");
      if (pic.src != clicked.src) {
        pic.src = clicked.src;
      } else {
        pic.src = "";
        pic.style.marginTop = "0";
      }
      pic.style.border = "1px solid #808080";
      pic.style.marginTop = "15px";
    }
    function enlarge2(clicked) {
      let pic = document.getElementById("pictureframe2");
      if (pic.src != clicked.src) {
        pic.src = clicked.src;
        document.getElementById("caption").innerHTML = clicked.alt;
      } else {
        pic.src = "";
        pic.style.marginTop = "0";
      }
      pic.style.border = "1px solid #808080";
      pic.style.marginTop = "15px";
    }
  </script>

</body>
</html>
